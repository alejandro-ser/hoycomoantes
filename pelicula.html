<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css?family=Josefin+Slab:700|Montserrat:700|Open+Sans&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/estilos.css">
    <link rel="stylesheet" href="css/circular-menu.css">
    <title>Hoy como Antes</title>
  </head>
  <body>
    <!-- Botones principales -->
    <button id="menu" class="btn-main btn-menu" type="button" name="button">
      <span>ME <br> NÚ</span>
    </button>

    <!-- Contenedor -->
    <div class="pelicula container-fluid h-100">
      <div class="row justify-content-center align-items-center h-100">
        <div class="pelicula__content col-2">
          <!-- PLAYER -->
          <div id='audioplayermain'>
            <div id='playerboundry'>
              <div id='toggleplay' class='toggleplay'></div>
              <div id='progress'>
                <div id='seekbar' class='seekbar'></div>
                <div id='ball' class='ball' draggable='true'></div>
              </div>
              <span id='time' style="display:none">00:00/00:00</span>
              <!-- <div id='volume' class='fullvolume'></div>
              <input type='range' max="100" min="0" id='volslider' value='100'> -->
            </div>
            <audio id='au' src="audio/deDias.mp3" preload='metadata'>
              <!-- <source src="audio/1_de_dias.mp3" type="audio/mp3"> -->
              Tu navegador web no soporta la reproduccion de audio.
            </audio>
          </div>

          <!-- Menu de audios -->
          <ul class="menu__list">
            <li><button type="button" class="btn-main deDias"
                        onclick="setChapter('deDias')">DE DÍAS</button></li>
            <li><button type="button" class="btn-main aNadie"
                        onclick="setChapter('aNadie')">A NADIE</button></li>
            <li><button type="button" class="btn-main porFavor"
                        onclick="setChapter('porFavor')">POR FAVOR</button></li>
            <li><button type="button" class="btn-main amanAma"
                        onclick="setChapter('amanAma')">AMAN AMA</button></li>
            <li><button type="button" class="btn-main si"
                        onclick="setChapter('si')">¿SÍ?</button></li>
            <li><button type="button" class="btn-main cosasCasos"
                        onclick="setChapter('cosasCasos')">COSAS CASOS</button></li>
            <li><button type="button" class="btn-main dosDisparos"
                        onclick="setChapter('dosDisparos')">DOS DISPAROS</button></li>
            <li><button type="button" class="btn-main hoyComoAntes"
                        onclick="setChapter('hoyComoAntes')">HOY COMO ANTES</button></li>
            <li><button type="button" class="btn-main no"
                        onclick="setChapter('no')">NO</button></li>
            <li><button type="button" class="btn-main noMeAcuerdo"
                        onclick="setChapter('noMeAcuerdo')">NO ME ACUERDO</button></li>
          </ul>
        </div>
        <div class="col-7 justify-self-center">
          <div class="row justify-content-center">
            <div class="col-6">
              <div class="circular-menu opened-nav ml-5">
                <div class="middle">
                  <span class="up" onclick="triggerVideo('hoyComoAntes')" onmouseover="showInfoVid('hoyComoAntes')"></span>
                  <span class="down" onclick="triggerVideo('noMeAcuerdo')" onmouseover="showInfoVid('noMeAcuerdo')"></span>
                </div>
                <ul>
                  <li class="deDiasV"
                      style="transform: rotate(45deg) skew(45deg);"
                      onclick="triggerVideo('deDias')"
                      onmouseover="showInfoVid('deDias')">
                    <a href="#">
                      <div class="horizontal" style="transform: rotate(157.5deg);">
                      </div>
                    </a>
                  </li>
                  <li class="aNadieV"
                      style="transform: rotate(90deg) skew(45deg);"
                      onclick="triggerVideo('aNadie')"
                      onmouseover="showInfoVid('aNadie')">
                    <a href="#">
                      <div class="horizontal" style="transform: rotate(112.5deg);">
                      </div>
                    </a>
                  </li>
                  <li class="porFavorV"
                      style="transform: rotate(135deg) skew(45deg);"
                      onclick="triggerVideo('porFavor')"
                      onmouseover="showInfoVid('porFavor')">
                    <a href="#">
                      <div class="horizontal" style="transform: rotate(67.5deg);">
                      </div>
                    </a>
                  </li>
                  <li class="amanAmaV"
                      style="transform: rotate(180deg) skew(45deg);"
                      onclick="triggerVideo('amanAma')"
                      onmouseover="showInfoVid('amanAma')">
                    <a href="#">
                      <div class="horizontal" style="transform: rotate(22.5deg);">
                      </div>
                    </a>
                  </li>
                  <li class="siV"
                      style="transform: rotate(225deg) skew(45deg);"
                      onclick="triggerVideo('si')"
                      onmouseover="showInfoVid('si')">
                    <a href="#">
                      <div class="horizontal" style="transform: rotate(-22.5deg);">
                      </div>
                    </a>
                  </li>
                  <li class="cosasCasosV"
                      style="transform: rotate(-90deg) skew(45deg);"
                      onclick="triggerVideo('cosasCasos')"
                      onmouseover="showInfoVid('cosasCasos')">
                    <a href="#">
                      <div class="horizontal" style="transform: rotate(-67.5deg);">
                      </div>
                    </a>
                  </li>
                  <li class="dosDisparosV"
                      style="transform: rotate(-45deg) skew(45deg);"
                      onclick="triggerVideo('dosDisparos')"
                      onmouseover="showInfoVid('dosDisparos')">
                    <a href="#">
                      <div class="horizontal" style="transform: rotate(-112.5deg);">
                      </div>
                    </a>
                  </li>
                  <li class="noV"
                      style="transform: rotate(0deg) skew(45deg);"
                      onclick="triggerVideo('no')"
                      onmouseover="showInfoVid('no')">
                    <a href="#">
                      <div class="horizontal" style="transform: rotate(-157.5deg);">
                      </div>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="col-3 pr-0">
          <div id="deDias" class="pelicula__info animated h-50">
            <h2>DE DÍAS</h2>
            <p><i>De días</i> se construye de la voz que nombra diferentes tiempos donde los cambios de espacio evidencian el movimiento y los recorridos que se van a dar en el transcurso de la narración.</p>
          </div>
          <div id="aNadie" class="pelicula__info animated h-50">
            <h2>A NADIE</h2>
            <p><i>A nadie</i> deja entrever la naturaleza secreta del material desde la voz, una pieza que es compuesta por fracciones del diario íntimo (grabado) e insinúa la relación de aparente confidencialidad que se tiene con el dispositivo.</p>
          </div>
          <div id="porFavor" class="pelicula__info animated h-50">
            <h2>POR FAVOR</h2>
            <p><i>Por Favor</i> da la bienvenida a los diferentes recorridos que se harán a lo largo de la película. El sonido robótico da la instrucción iniciando  los viajes temporales de los capítulos.</p>
          </div>
          <div id="amanAma" class="pelicula__info animated h-50">
            <h2>AMAN AMA</h2>
            <p><i>Aman Ama</i> se compone como una oración en formato de mantra, la relación sonora con la palabra Amor, da sentido a lo que considero la esencia de la espiritualidad, concepto abordado en esta pieza.</p>
          </div>
          <div id="si" class="pelicula__info animated h-50">
            <h2>¿SI?</h2>
            <p><i>¿Si?</i> suscitan preguntas sobre los vínculos espirituales provocados por la soledad, dos posiciones que se contraponen desde el sonido y la imagen.</p>
          </div>
          <div id="cosasCasos" class="pelicula__info animated h-50">
            <h2>COSAS CASOS</h2>
            <p><i>Cosas Casos</i> tienen como intención reforzar la idea de la soledad y la espiritualidad a partir del vínculo sonido-imagen. Todo esto se manifiesta en los gestos de dos mujeres mayores y lo que su edad implica en cuanto a modismos y sabiduría.</p>
          </div>
          <div id="dosDisparos" class="pelicula__info animated h-50">
            <h2>DOS DISPAROS</h2>
            <p><i>Dos Disparos</i> se centra en dos acontecimientos: uno, la imposibilidad de cerrar los oídos; y dos, la historia de un asesinato contada por un niño.</p>
          </div>
          <div id="hoyComoAntes" class="pelicula__info animated h-50">
            <h2>HOY COMO ANTES</h2>
            <p><i>Hoy como antes</i> cuestiona el paso del tiempo y las formas en las que éste se refleja en el cuerpo. Las texturas sonoras de esta pieza pretenden crear tensiones entre el espacio interior y el exterior.</p>
          </div>
          <div id="no" class="pelicula__info animated h-50">
            <h2>NO</h2>
            <p><i>No</i> incorpora el dispositivo (cámara y grabadora) al cuerpo físico, para así dar una idea de mimesis entre el cuerpo humano y el cuerpo de la máquina.</p>
          </div>
          <div id="noMeAcuerdo" class="pelicula__info animated h-50">
            <h2>NO ME ACUERDO</h2>
            <p><i>No me acuerdo</i> es una pieza que trabaja desde la autonomía del dispositivo, cuestionando el manejo y la vida de la herramienta.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal menú -->
    <div id="modalVideo" class="menu modal-video animated">
      <div class="modal-video__content container h-100">
        <div class="row justify-content-center h-100">
          <div class="col-9 align-self-center text-right">
            <div class="modal-video__header">
              <button id="close" class="btn-close" type="button" name="button">
                <span>X</span>
              </button>
            </div>
            <!-- Video de fondo -->
            <video controls id="triggerVideo" class="img-fluid my-3">
              <source src="video/deDias.mp4" type="video/mp4">
            </video>
            <div class="modal-video__footer">
              <h3 id="videoTitle" class="text-uppercase"></h3>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal menú -->
    <div id="modalMenu" class="menu animated">
      <button id="volver" class="btn-main btn-menu" type="button" name="button">
        <span>VOL <br> VER</span>
      </button>
      <div class="menu__content container-fluid">
        <div class="row h-75">
          <div class="menu__content--right col-1"></div>
          <div class="col-10">
            <ul class="menu__list">
              <li><a href="descripcion.html">HOY COMO ANTES</a></li>
              <li><a href="pelicula.html">PELÍCULA</a></li>
              <li><a href="eventos.html">EVENTOS</a></li>
              <li><a href="contacto.html">DÉJANOS TU OPINIÓN</a></li>
              <li><a href="referencias.html">REFERENCIAS</a></li>
              <li><a href="sobre_mi.html">AIXA ECHEVERRY GONZÁLEZ</a></li>
              <li><a href="contacto.html">CONTACTO</a></li>
              <li><a href="colaboradores.html">COLABORADORES</a></li>
              <li><a href="index.html">INTRO</a></li>
            </ul>
          </div>
          <div class="menu__content--left col-1"></div>
        </div>
      </div>
    </div>
    <!-- Scripts -->
    <script src="js/main.js" charset="utf-8"></script>
    <script type="text/javascript">
      /*
        Modal Video
      */

      var au = document.getElementById("au");
      var playbutton = document.getElementById("toggleplay");
      var time = document.getElementById("time");
      var seekbar = document.getElementById("seekbar");
      var seekbarwidth = document.getElementById("seekbar").offsetWidth;
      var ball = document.getElementById("ball");
      var volume = document.getElementById("volume");
      var volslider = document.getElementById("volslider");

      var modalVideo = document.getElementById('modalVideo');
      var vid = document.getElementById("triggerVideo");
      var close = document.getElementById("close");

      // When user clicks button, open Modal
      function triggerVideo(chapterVideo) {
        modalVideo.classList.remove('fadeOut');
        modalVideo.style.display = "block";
        modalVideo.classList.add('fadeIn');

        au.pause();
        au.src = 'audio/'+chapterVideo+'.mp3';
        vid.src = 'video/'+chapterVideo+'.mp4';
        vid.play();
        au.play();

        // vid.src = 'video/'+chapterVideo+'.mp4';
        // vid.play();
        // playPause();
        if (chapterVideo == 'deDias') {
          document.getElementById('videoTitle').innerHTML = 'de días';
        } else if (chapterVideo == 'aNadie') {
          document.getElementById('videoTitle').innerHTML = 'a nadie';
        }else if (chapterVideo == 'porFavor') {
          document.getElementById('videoTitle').innerHTML = 'por favor';
        } else if (chapterVideo == 'amanAma') {
          document.getElementById('videoTitle').innerHTML = 'aman ama';
        } else if (chapterVideo == 'si') {
          document.getElementById('videoTitle').innerHTML = '¿sí?';
        } else if (chapterVideo == 'cosasCasos') {
          document.getElementById('videoTitle').innerHTML = 'cosas casos';
        } else if (chapterVideo == 'dosDisparos') {
          document.getElementById('videoTitle').innerHTML = 'dos Disparos';
        } else if (chapterVideo == 'hoyComoAntes') {
          document.getElementById('videoTitle').innerHTML = 'a hoy como antes';
        } else if (chapterVideo == 'no') {
          document.getElementById('videoTitle').innerHTML = 'no';
        } else if (chapterVideo == 'noMeAcuerdo') {
          document.getElementById('videoTitle').innerHTML = 'no me acuerdo';
        }
      };

      function addHover(chapterTitle){
        document.getElementsByClassName(chapterTitle)[0].style.opacity = '0.5';
      }

      // When user clicks Close (x), close Modal
      close.onclick = function() {
        modalVideo.classList.remove('fadeIn');
        modalVideo.classList.add('fadeOut');
        modalVideo.style.display = "none";
        au.pause();
      };

      // When user clicks anywhere outside of the Modal, close Modal
       window.onclick = function(event) {
          if (event.target == modalVideo) {
             modalVideo.style.display = "none";
             au.pause();
             }
          }

        function showInfoVid(chapterInfo) {
          els = document.getElementsByClassName('btn-main');
          Array.prototype.forEach.call(els, function(el) {
              el.classList.remove('active');
          });
          document.querySelector('.'+chapterInfo).classList.add('active');
          showInfo(chapterInfo);
        }

      /*
        AUDIO PLAYER
      */

      function playPause() {
        if (au.paused) {
          playbutton.className = 'toggleplaypause';
          au.play();
        } else {
          au.pause();
          playbutton.className = 'toggleplay';
        }
      }

      function formatTime(seconds) {
          seconds = Math.round(seconds);
          minutes = Math.floor(seconds / 60);
          minutes = (minutes >= 10) ? minutes : "0" + minutes;
          seconds = Math.floor(seconds % 60);
          seconds = (seconds >= 10) ? seconds : "0" + seconds;
          return minutes + ":" + seconds;
      }

      function timeupdate() {
          var ongoingtime = formatTime(au.currentTime);
          var totaltime = formatTime(au.duration);
          time.innerHTML = (ongoingtime + '/' + totaltime);
          seekbar.style.width = au.currentTime / au.duration * 100 + '%';
          ball.style.marginLeft = 'calc( -10px + ' + au.currentTime / au.duration * 100 + '% )';

          if (au.networkState === au.NETWORK_LOADING) {
              // The user agent is actively trying to download data.
              // The colour of the ball changes to red while buffering.
              ball.style.backgroundColor = 'red';
          } else {
              ball.style.backgroundColor = '';//returns to original colour
          }
      }

      function changeTime(event) {
          var clickedpos = event.clientX;
          var offsets = seekbar.getBoundingClientRect();
          //gets offsets of the seekbar
          var width = clickedpos - offsets.left;
          //so that we can find the difference(in px) in mouse drag
          au.currentTime = width * au.duration / 600;//changes current time
          ball.style.marginLeft = 'calc( -10px + ' + au.currentTime / au.duration * 100 + '% )';
          //ball moves forward before timeupdate function fires.
      }

      function mute() {
          if (au.muted = !au.muted) {
              volume.className = 'mute';
              volslider.value = 0
          } else {
              volume.className = 'fullvolume';
              volslider.value = 100
          }
      }

      function changevol() {
          au.volume = volslider.value / 100;
          if (volslider.value == 0) {
              volume.className = 'mute';
          }
          if (volslider.value > 0) {
              volume.className = 'fullvolume';
          }
      }

      function setChapter(chapter){
        if(au.currentTime > 0) {
          au.pause();
        }
        au.src = 'audio/'+chapter+'.mp3';
        els = document.getElementsByClassName('btn-main');
        Array.prototype.forEach.call(els, function(el) {
            el.classList.remove('active');
        });
        document.querySelector('.'+chapter).classList.add('active');
        showInfo(chapter);
        playPause();
      }

      /*
        Mostrar info de capitulo
      */
      function showInfo(id) {
        infos = document.getElementsByClassName('pelicula__info');
        Array.prototype.forEach.call(infos, function(inf) {
            inf.style.display = "none";
        });
        info = document.getElementById(id);
        info.classList.add('fadeInRight');
        info.style.display = "block";
      }
      //
      // function hideInfo(id) {
      //   info = document.getElementById(id);
      //   info.style.display = "none";
      // }

      //chapter.addEventListener("click", setChapter);
      playbutton.addEventListener("click", playPause);
      au.addEventListener("timeupdate", timeupdate);
      progress.addEventListener("click", changeTime);
      progress.addEventListener("mousedown", changeTime);
      progress.addEventListener("dragend", changeTime);
      progress.addEventListener("mouseup", changeTime);
      //volume.addEventListener("click", mute);
      //volslider.addEventListener("input", changevol);
    </script>
  </body>
</html>
